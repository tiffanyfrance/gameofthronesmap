<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Leaflet</title>
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
  <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>

  <style>
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }
    .leaflet-container {
      background: #222;
    }
    #mapid {
      height: 100%;
    }
  </style>
</head>
<body>

  <div id="mapid"></div>

  <script>
    var map = L.map('mapid').setView([0,0], 2);

    L.tileLayer('GOT/GOT/{z}/{x}/{y}.png', {
        maxZoom: 5,
        minZoom: 1,
        noWrap: true,
        crs: L.CRS.Simple
    }).addTo(map);

    var southWest = map.unproject([200, 6700], map.getMaxZoom());
    var northEast = map.unproject([8000, 1500], map.getMaxZoom());
    map.setMaxBounds(new L.LatLngBounds(southWest, northEast));

    map.on("click", function(e) {
      console.log(e.latlng)
    });

    // var khalessiIcon = L.icon({
    //   iconUrl: 'GOT/images/khalessi.png',
    //   shadowUrl: 'GOT/images/shadow.png',
    //   iconSize:     [40, 40], // size of the icon
    //   iconAnchor:   [40, 40], // point of the icon which will correspond to marker's location
    //   shadowSize: [44, 44],
    //   shadowAnchor: [42, 42]
    // });

    // var khalessi = L.marker([-1.142502403706165, -71.8505859375], {icon: khalessiIcon}).addTo(map);

    var LeafIcon = L.Icon.extend({
      options: {
        shadowUrl: 'GOT/images/shadow.png',
        iconSize:     [40, 40],
        iconAnchor:   [40, 40], // point of the icon which will correspond to marker's location
        shadowSize:   [44, 44],
        shadowAnchor: [42, 42],
        popupAnchor:  [-20, -44]
      }
    });

    var khalessiIcon = new LeafIcon({iconUrl: 'GOT/images/khalessi.png'}),
        tyrionIcon = new LeafIcon({iconUrl: 'GOT/images/tyrion.png'});

    var khalessi = L.marker([-1.142502403706165, -71.8505859375], {icon: new LeafIcon({iconUrl: 'GOT/images/khalessi.png'})}).bindPopup("hi").addTo(map);
    var tyrion = L.marker([-28.381735043223095, 14.3], {icon: tyrionIcon}).bindPopup("I am a red leaf.").addTo(map);


    // TODO button for path
    // var btn = L.DomUtil.create('button');
    // btn.innerHTML = "follow";
    // var container = L.DomUtil.create('div');
    // container.innerHTML = "Daenerys Targaryen, called 'Daenerys Stormborn' and 'Mother of Dragons', self-styled 'Khaleesi of the Great Grass Sea'. Widow of Khal Drogo, the Great Khal of his generation. She currently leads a khalasar of 100,000, the bulk of the Dothraki's fighting population.<br />";
    // container.appendChild(btn);




    // TODO layers - layers are in the json
    var a = L.layerGroup([khalessi]),
        b = L.layerGroup ([tyrion]);

    map.addLayer(a);
    map.addLayer(b);

    var overlay = {
      "Khalessi": a,
      "Tyrion": b
    };

    L.control.layers(null, overlay).addTo(map);


// // var foo = "<button>see path</button>";
// // khalessi.bindPopup("Daenerys Targaryen, called 'Daenerys Stormborn' and 'Mother of Dragons', self-styled 'Khaleesi of the Great Grass Sea'. Widow of Khal Drogo, the Great Khal of his generation. She currently leads a khalasar of 100,000, the bulk of the Dothraki's fighting population.<br />" + foo);

    // foo.addEventListener('click', function() {



    //   khalessi.closePopup();

    //   var coords = [[-1.142502403706165,-71.8505859375],[-1.437616057814226,-66.85930274265331],[-1.7327297119222869,-61.86801954780662],[-2.027843366030348,-56.876736352959924],[-2.322957020138409,-51.885453158113236],[-2.6180706742464697,-46.89416996326655],[-2.9131843283545305,-41.902886768419854],[-3.2082979824625912,-36.91160357357316],[-3.503411636570652,-31.920320378726473],[-3.798525290678713,-26.929037183879792],[-4.093638944786774,-21.937753989033105],[-4.388752598894834,-16.94647079418641],[-4.683866253002896,-11.955187599339709],[-4.978979907110957,-6.963904404493022],[-5.238908869773361,-1.9750894055969266],[-4.249840501032953,2.9261087909624948],[-3.2607721322925465,7.827306987521901],[-2.2717037635521407,12.728505184081309],[-1.2826353948117317,17.62970338064073],[-0.2935670260713259,22.530901577200137],[0.6955013426690799,27.432099773759543],[1.6845697114094857,32.33329797031895],[2.6736380801498916,37.23449616687836],[3.6627064488902983,42.135694363437764],[4.651774817630707,47.03689255999719],[1.8968965578213983,47.922563947178695],[-2.9231587934132763,46.59325344506336],[-7.743214144647936,45.26394294294803],[-12.563269495882597,43.934632440832694],[-17.383324847117258,42.60532193871736],[-22.203380198351915,41.27601143660203],[-27.023435549586576,39.9467009344867],[-30.754304506392657,42.207377261784984],[-34.023169417856856,45.99083100018303],[-37.292034329321055,49.77428473858107],[-40.560899240785254,53.55773847697912],[-43.82976415224945,57.34119221537716],[-47.09862906371366,61.124645953775214],[-50.13406644456542,64.39913139761205],[-49.39947036005042,59.45338892629235],[-48.66487427553543,54.5076464549727],[-47.93027819102044,49.56190398365306],[-47.19568210650545,44.616161512333385],[-46.46108602199046,39.670419041013744],[-45.72648993747546,34.72467656969407],[-44.99189385296047,29.778934098374428],[-44.25729776844548,24.83319162705478],[-43.52270168393049,19.887449155735105],[-42.7881055994155,14.941706684415465],[-42.13617964132301,9.984719916920078],[-40.00611670225045,8.021693067121385],[-35.64562469808019,10.468345776756912],[-31.285132693909908,12.914998486392452],[-28.218163616074214,12.518337235549321],[-27.197518726963576,7.623617222072373],[-26.176873837852927,2.7288972085953684],[-25.156228948742278,-2.1658228048816337],[-24.135584059631643,-7.0605428183585826],[-23.114939170520994,-11.955262831835585],[-22.094294281410345,-16.849982845312596],[-21.073649392299707,-21.744702858789537],[-20.053004503189058,-26.639422872266536],[-19.03235961407841,-31.53414288574355],[-18.011714724967774,-36.42886289922049],[-16.991069835857125,-41.323582912697496],[-15.970424946746476,-46.218302926174495],[-14.949780057635838,-51.113022939651444],[-13.929135168525189,-56.00774295312846],[-12.90849027941454,-60.90246296660547],[-11.887845390303905,-65.79718298008241],[-10.867200501193256,-70.69190299355941],[-9.846555612082607,-75.58662300703642],[-8.825910722971958,-80.4813430205134],[-7.80526583386132,-85.37606303399036],[-6.784620944750671,-90.27078304746738],[-5.7639760556400255,-95.16550306094437],[-4.743331166529387,-100.06022307442132],[-3.7226862774187275,-104.95494308789839],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875],[-3.688855143147035,-105.1171875]];
    //   var geojson = { type: 'LineString', coordinates: coords };

    //   // Create a counter with a value of 0.
    //   var j = 0;

    //   // Create a marker and add it to the map.
    //   // var marker = L.marker([0, 0]).addTo(map);

    //   tick();
    //   function tick() {
    //     // Set the marker to be at the same point as one
    //     // of the segments or the line.
    //     khalessi.setLatLng(L.latLng(
    //         geojson.coordinates[j][0],
    //         geojson.coordinates[j][1]));

    //     // Move to the next point of the line
    //     // until `j` reaches the length of the array.
    //     if (++j < geojson.coordinates.length) setTimeout(tick, 100);
    //   };

    // });

  </script>

</body>
</html>